

<!DOCTYPE html>
<html class="writer-html5" lang="Python" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>hydrationGUI &mdash; hanlab  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/hanlabtheme.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-dataframe.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-rendered-html.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="cnsi" href="cnsi.html" />
    <link rel="prev" title="odnp" href="odnp.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> hanlab
          

          
            
            <img src="_static/hanlogo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing hanlab</a></li>
<li class="toctree-l1"><a class="reference internal" href="odnp.html">odnp</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">hydrationGUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#processing-a-single-topspin-data-folder-either-a-1d-spectrum-or-2d-inversion-recovery">Processing a single topspin data folder, either a 1D spectrum or 2D inversion recovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="#processing-han-lab-datasets">Processing Han lab datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#analyzing-workup-results-or-previously-saved-gui-results">Analyzing Workup results or previously saved GUI results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#terminal-outputs">Terminal outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#saving-results">Saving Results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cnsi.html">cnsi</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html">hanlab Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="version_history.html">Version History</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">hanlab</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>hydrationGUI</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/hydrationGUI.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hydrationgui">
<span id="id1"></span><h1>hydrationGUI<a class="headerlink" href="#hydrationgui" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>PyQt5 is required to use this GUI. This can lead to some cross-platform problems. You may need to
uninstall and re-install PyQt5 specifying version 5.14 (pip install PyQt5==5.14). If this does
not fix the problem, please report the issue using the Github issues tracker.</p>
</div>
<p>The hydrationGUI is currently designed to only work with the results of UCSB routines such as &quot;rb_dnp1&quot; used at the CNSI facility.</p>
<p>To start the hydrationGUI type the command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;</span> hydrationGUI
</pre></div>
</div>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="_images/hydrationGUI_overview.png"><img alt="Opening hydrationGUI" src="_images/hydrationGUI_overview.png" style="width: 720px;" /></a>
<p class="caption"><span class="caption-text">Opening hydrationGUI</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="processing-a-single-topspin-data-folder-either-a-1d-spectrum-or-2d-inversion-recovery">
<h2>Processing a single topspin data folder, either a 1D spectrum or 2D inversion recovery<a class="headerlink" href="#processing-a-single-topspin-data-folder-either-a-1d-spectrum-or-2d-inversion-recovery" title="Permalink to this headline">¶</a></h2>
<p>To work on a single topspin spectrum use the <strong>Get Directory</strong> button to select a numbered folder containing a single spectrum, either 1D or 2D. You may make adjustments to the data phase and integration window using the sliders and edit box or the windowing linewidth using the edit box. Use the “Optimize” checkboxes to search for and apply the “optimal” parameters. For inversion recovery experiments the yellow markers in the top right hand plot are the imaginary parts of the integrals. The optimal integration window parameters and phase should result in all of these points occurring close to 0. See <a class="reference internal" href="odnp.html#odnp"><span class="std std-ref">odnp</span></a> for the T<sub>1</sub> fit function.</p>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="_images/hydrationGUI_importing_1d_2d.png"><img alt="Loading 1D or 2D data" src="_images/hydrationGUI_importing_1d_2d.png" style="width: 720px;" /></a>
<p class="caption"><span class="caption-text">Selecting data folder</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="_images/hydrationGUI_experiment_304.png"><img alt="Example processing and fitting 2D inversion recovery experiment" src="_images/hydrationGUI_experiment_304.png" style="width: 720px;" /></a>
<p class="caption"><span class="caption-text">Example processing and fitting 2D inversion recovery experiment</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="processing-han-lab-datasets">
<h2>Processing Han lab datasets<a class="headerlink" href="#processing-han-lab-datasets" title="Permalink to this headline">¶</a></h2>
<p>To load a dataset collected in the CNSI facility at University of California Santa Barbara using the ‘rb_dnp1’ command, use the <strong>Han Lab</strong> button and select the base folder. The folder must have at least the elements:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 25%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Folder/File</strong></p></td>
<td><p><strong>Type</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Folder: 1D, FID</p></td>
<td><p>Spectrum at microwave power = 0</p></td>
</tr>
<tr class="row-odd"><td><p>6-26</p></td>
<td><p>Folder: 1D, FID</p></td>
<td><p>FIDs collected at increasing microwave powers</p></td>
</tr>
<tr class="row-even"><td><p>28-32</p></td>
<td><p>Folder: 2D inversion recovery</p></td>
<td><p>T<sub>1</sub> measurements collected at increasing microwave powers</p></td>
</tr>
<tr class="row-odd"><td><p>304</p></td>
<td><p>Folder: 2D inversion recovery</p></td>
<td><p>T<sub>1</sub> measurement at microwave power = 0</p></td>
</tr>
<tr class="row-even"><td><p>power.mat/csv</p></td>
<td><p>File: MATLAB workspace or .csv</p></td>
<td><p>list of power measurements made during collecting the data in folders 6-26</p></td>
</tr>
<tr class="row-odd"><td><p>t1_powers.mat/csv</p></td>
<td><p>File: MATLAB workspace or .csv</p></td>
<td><p>list of power measurements made during collecting the data in folders 28-32</p></td>
</tr>
</tbody>
</table>
<div class="figure align-center" id="id5">
<a class="reference internal image-reference" href="_images/hydrationGUI_importing_rbdnp1.png"><img alt="Example Importing rb_dnp1 Experiment" src="_images/hydrationGUI_importing_rbdnp1.png" style="width: 720px;" /></a>
<p class="caption"><span class="caption-text">Importing &quot;rb_dnp1&quot; experiment</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>The title of the main plot will let you know which folder you are currently working on. Use the <strong>Next</strong> button to advance through the dataset towards calculating hydration parameters, and the <strong>Back</strong> button to regress through the dataset. The <strong>Auto Process</strong> button will automatically process the entire dataset and calculate hydration parameters.</p>
<div class="figure align-center" id="id6">
<a class="reference internal image-reference" href="_images/hydrationGUI_procesing_rbdnp1_data.png"><img alt="Example Importing rb_dnp1 Experiment" src="_images/hydrationGUI_procesing_rbdnp1_data.png" style="width: 720px;" /></a>
<p class="caption"><span class="caption-text">Advance through the individual datasets to process the data</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p>You may make adjustments to the data phase, integration window width, and integration window center using the sliders and window width edit box. Use the “Optimize” checkboxes to search for and apply the “optimal” parameters. For optimizing the width, checking Optimize selects the window that encompasses roughly 2/3 of the peak area while unchecking selects the default width of 10 ppm. For NMR at ~15MHz, 10 ppm corresponds to ~150MHz, which is a typical peak width for data collected at CNSI. If processing data collected at CNSI it is recommended you use the default 10 ppm window width. Regardless of the chosen width, it is always recommended that you be consistent to ensure comparability between data. When the <strong>Next</strong> or <strong>Auto Process</strong> buttons are pressed the width that is displayed in the plot will be used for integration.</p>
<div class="figure align-center" id="id7">
<a class="reference internal image-reference" href="_images/hydrationGUI_ksigma.png"><img alt="Generating dnpHydration Results" src="_images/hydrationGUI_ksigma.png" style="width: 720px;" /></a>
<p class="caption"><span class="caption-text">Presentation of dnpHydration results</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<p>The results are displayed when finished. If a “Workup” is also present in the data folder it will be imported for comparison. Use the corresponding checkboxes to interact with the Workup results. Interaction with any parameter edit field or checkbox, as well as the T1 interpolation checkboxes, automatically updates the calculations. Click <a class="reference internal" href="odnp.html#odnp"><span class="std std-ref">odnp</span></a> to see how the data are arranged by the GUI and used to calculate hydration parameters.</p>
<p>The <strong>Restart</strong> button will return you to the beginning of processing. If the <strong>Only T1(0)</strong> checkbox is selected, Restart will return you to the final folder that is the T<sub>1</sub> (0) measurement while all other processing will be retained. If the <strong>Only T1(p)</strong> checkbox is selected you will return to the beginning of the series of T<sub>1</sub> measurements and previous processing of the enhancement points is retained.</p>
</div>
<div class="section" id="analyzing-workup-results-or-previously-saved-gui-results">
<h2>Analyzing Workup results or previously saved GUI results<a class="headerlink" href="#analyzing-workup-results-or-previously-saved-gui-results" title="Permalink to this headline">¶</a></h2>
<p>You may also load and analyze the results of “Workup” code processing with the <strong>Get Directory</strong> button, or you may select the .mat or .h5 files of a previously saved hydrationGUI session with the <strong>Get File</strong> button. The Workup folder must have at least the following elements:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 17%" />
<col style="width: 59%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Filename</strong></p></td>
<td><p><strong>File type</strong></p></td>
<td><p><strong>File contains</strong></p></td>
</tr>
<tr class="row-even"><td><p>enhancementPowers.csv</p></td>
<td><p>.csv file</p></td>
<td><p>list of enhancements and corresponding power measurements</p></td>
</tr>
<tr class="row-odd"><td><p>kSigma.csv</p></td>
<td><p>.csv file</p></td>
<td><p>list of [spin_concentration * κ<sub>σ</sub> * s(p)] values.</p></td>
</tr>
<tr class="row-even"><td><p>t1Powers.csv</p></td>
<td><p>.csv file</p></td>
<td><p>list of T<sub>1</sub> s and corresponding power measurements</p></td>
</tr>
</tbody>
</table>
<div class="figure align-center" id="id8">
<a class="reference internal image-reference" href="_images/hydrationGUI_previous_results1.png"><img alt="Importing processing results from Workup" src="_images/hydrationGUI_previous_results1.png" style="width: 720px;" /></a>
<p class="caption"><span class="caption-text">Select a Workup folder</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<p>If the mat workspace or h5 file were not saved from hydrationGUI, they can still be read and analyzed if they have the same elements.</p>
<p>The mat workspace must contain a structure named &quot;odnp&quot; with at least the following elements (the same structure accepted and saved by the MATLAB App called xODNP, available at MathWorks File Exchange <a class="reference external" href="https://www.mathworks.com/matlabcentral/fileexchange/73293-xodnp">https://www.mathworks.com/matlabcentral/fileexchange/73293-xodnp</a>):</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 18%" />
<col style="width: 62%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Variable</strong></p></td>
<td><p><strong>Type</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p>odnp.Ep</p></td>
<td><p>#x1 Double</p></td>
<td><p>list of signal enhancements</p></td>
</tr>
<tr class="row-odd"><td><p>odnp.Epowers</p></td>
<td><p>#x1 Double</p></td>
<td><p>list of powers used to collect Ep</p></td>
</tr>
<tr class="row-even"><td><p>odnp.T1p</p></td>
<td><p>#x1 Double</p></td>
<td><p>list of T<sub>1</sub> values</p></td>
</tr>
<tr class="row-odd"><td><p>odnp.T1p_stdd</p></td>
<td><p>#x1 Double</p></td>
<td><p>list of standard deviations in T1p</p></td>
</tr>
<tr class="row-even"><td><p>odnp.T1powers</p></td>
<td><p>#x1 Double</p></td>
<td><p>list of powers used to collect T1p</p></td>
</tr>
<tr class="row-odd"><td><p>odnp.T10</p></td>
<td><p>single number</p></td>
<td><p>T<sub>1</sub> value for power = 0, i.e. T<sub>1</sub> (0)</p></td>
</tr>
<tr class="row-even"><td><p>odnp.T10_stdd</p></td>
<td><p>single number</p></td>
<td><p>standard deviation in T10</p></td>
</tr>
<tr class="row-odd"><td><p>odnp.T100</p></td>
<td><p>single number</p></td>
<td><p>T<sub>1,0</sub> (0)</p></td>
</tr>
<tr class="row-even"><td><p>odnp.T100_stdd</p></td>
<td><p>single number</p></td>
<td><p>standard deviation in T100</p></td>
</tr>
</tbody>
</table>
<p>The h5 must contain a dictionary named 'hydration_inputs' with at least the following elements:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 18%" />
<col style="width: 62%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Key</strong></p></td>
<td><p><strong>Type</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p>E</p></td>
<td><p>numpy array</p></td>
<td><p>list of signal enhancements</p></td>
</tr>
<tr class="row-odd"><td><p>E_power</p></td>
<td><p>numpy array</p></td>
<td><p>list of powers used to collect Ep</p></td>
</tr>
<tr class="row-even"><td><p>T1</p></td>
<td><p>numpy array</p></td>
<td><p>list of T<sub>1</sub> values</p></td>
</tr>
<tr class="row-odd"><td><p>T1_power</p></td>
<td><p>numpy array</p></td>
<td><p>list of powers used to collect T1p</p></td>
</tr>
<tr class="row-even"><td><p>T10</p></td>
<td><p>float</p></td>
<td><p>T<sub>1</sub> value for power = 0, i.e. T<sub>1</sub> (0)</p></td>
</tr>
<tr class="row-odd"><td><p>T100</p></td>
<td><p>float</p></td>
<td><p>T<sub>1,0</sub> (0)</p></td>
</tr>
</tbody>
</table>
<p>and a separate dictionary named 'hydration_results' with at least the following elements:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 23%" />
<col style="width: 52%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Key</strong></p></td>
<td><p><strong>Type</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p>T1_stdd</p></td>
<td><p>numpy array</p></td>
<td><p>list of standard deviations in T1</p></td>
</tr>
<tr class="row-odd"><td><p>T10_stdd</p></td>
<td><p>float</p></td>
<td><p>standard deviation in T10</p></td>
</tr>
<tr class="row-even"><td><p>T100_stdd</p></td>
<td><p>float</p></td>
<td><p>standard deviation in T100</p></td>
</tr>
</tbody>
</table>
<div class="figure align-center" id="id9">
<a class="reference internal image-reference" href="_images/hydrationGUI_previous_results2.png"><img alt="Importing Hydration Results saved from GUI" src="_images/hydrationGUI_previous_results2.png" style="width: 720px;" /></a>
<p class="caption"><span class="caption-text">Select a saved mat or h5 file</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<p>The results of previous processing will be used to calculate hydration parameters.</p>
<div class="figure align-center" id="id10">
<a class="reference internal image-reference" href="_images/hydrationGUI_results_from_h5.png"><img alt="Imported hydrationGUI Results" src="_images/hydrationGUI_results_from_h5.png" style="width: 720px;" /></a>
<p class="caption"><span class="caption-text">Analyzed results from previously saved Workup, mat workspace, or h5</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="terminal-outputs">
<h2>Terminal outputs<a class="headerlink" href="#terminal-outputs" title="Permalink to this headline">¶</a></h2>
<p>The terminal will display processing and calculation progress as well as standard deviations in the T<sub>1</sub> values and κ<sub>σ</sub>, including the imported κ<sub>σ</sub> if a Workup was found.</p>
<div class="figure align-center" id="id11">
<a class="reference internal image-reference" href="_images/hydrationGUI_terminal.png"><img alt="Terminal Outputs" src="_images/hydrationGUI_terminal.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Terminal outputs during processing and calculations</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="saving-results">
<h2>Saving Results<a class="headerlink" href="#saving-results" title="Permalink to this headline">¶</a></h2>
<p>After processing is complete and hydration parameters are calculated, the <strong>Save</strong> button is available. Your results are saved in .csv, .h5, and .mat formats. The .h5 and .mat files can be imported by hydrationGUI. The .mat file can be imported by the MATLAB app called xODNP that is available at MathWorks File Exchange: <a class="reference external" href="https://www.mathworks.com/matlabcentral/fileexchange/73293-xodnp">https://www.mathworks.com/matlabcentral/fileexchange/73293-xodnp</a>. See <a class="reference internal" href="odnp.html#odnp"><span class="std std-ref">odnp</span></a> for explanation of the saved inputs/results object.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cnsi.html" class="btn btn-neutral float-right" title="cnsi" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="odnp.html" class="btn btn-neutral float-left" title="odnp" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021, hanlab

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>